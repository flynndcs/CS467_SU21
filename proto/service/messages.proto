syntax = "proto3";
package service;
option go_package = "CS467_SU21/proto/service";

/*
  gRPC MESSAGE DEFINITIONS 
*/

/* 
  GATEWAY SERVICE
*/

// The status request message (REST request: GET /api/status)
message StatusRequest{
}

// The response message containing the status (response to StatusRequest)
message StatusReply {
  string status = 1;
}

/* 
  PRODUCT SERVICE
*/

// The status request message (gRPC)
message ProductStatusRequest{}

// The response to the product status request
message ProductStatusReply{
  string status = 1;
}

message GetSingleProductRequest{
  string name = 1;
  repeated string scope = 2;
}

message GetProductsInScopeRequest{
  repeated string scope = 1;
}

message StoredProducts{
  repeated StoredProduct products = 1;
}

message PutSingleProductRequest{
  string name = 1;
  repeated string scope = 2;
  optional int64 expires = 3;
}

message StoredProduct{
  string name = 1;
  repeated string scope = 2;
  string data = 3;
  int64 expires = 4;
}

message ClearSingleProductRequest{
  string name = 1;
  repeated string scope = 2;
}

message ClearSingleProductResponse{
  string deletedName = 1;
  repeated string scope = 2;
}
