syntax = "proto3";
package service;
option go_package = "flynndcs.com/flynndcs/grpc-gateway/proto/service";

import "google/api/annotations.proto";
import "service/messages.proto";

service Gateway {
  rpc GetStatus (StatusRequest) returns (StatusReply) {
    option (google.api.http) = {
      get: "/api/status"
    };
  }

  rpc GetSingleProduct(GetSingleProductRequest) returns (StoredProduct){
    option (google.api.http) = {
      get: "/api/product"
    };
  }

  rpc GetProductsInScope(GetProductsInScopeRequest) returns (StoredProducts){
    option (google.api.http) = {
      get: "/api/product/range"
    };
  }

  rpc PutSingleProduct(PutSingleProductRequest) returns (StoredProduct){
    option (google.api.http) = {
      post: "/api/product"
      body: "*"
    };
  }

  rpc ClearSingleProduct(ClearSingleProductRequest) returns (ClearSingleProductResponse){
    option (google.api.http) = {
      delete: "/api/product"
    };
  }
}

service Product{
  rpc GetProductStatus (ProductStatusRequest) returns (ProductStatusReply){}
  rpc GetSingleProduct (GetSingleProductRequest) returns (StoredProduct){}
  rpc GetProductsInScope(GetProductsInScopeRequest) returns (StoredProducts){}
  rpc PutSingleProduct (PutSingleProductRequest) returns (StoredProduct){}
  rpc ClearSingleProduct (ClearSingleProductRequest) returns (ClearSingleProductResponse){}
}